@page
@model OPM.SFS.Web.Pages.Agency.RegistrationModel
@{
    Layout = "_SideMenuLayoutAO";
}
<div class="grid-extra-wide">
     <div asp-validation-summary="All">
            <span>One or more errors have occured.</span>
        </div>
    <form method="post">
       <div class="usa-grid">
            <h2 style="text-transform:uppercase;color:#046b99;font-size:36px">Agency Officials: <em>Registration</em></h2>
            <div class="usa-width-one-half">
                <p>
                    To register as an Agency Official, complete the form below and
                    then select <strong>Submit</strong>. Required fields are indicated by an asterisk(*).
                    "Agency" should reflect your agency headquarters. (For example,
                    if you work for the Federal Bureau of Investigation, you would select
                    "U.S. Department of Justice" under <em>Agency</em> and Federal Bureau of
                    Investigation under <em>Sub-Agency</em>.) Once you have been approved you will
                    receive an email confirmation. This may take up to two business days.
                </p>
                
                <div class="control-group validate-input">
                    <label for="ddlAgencyType">*Agency Type</label>
                    <select asp-for="Data.AgencyType" id="ddlAgencyType"  class="agencySelect" asp-items="Model.Data.AgencyTypeList" tabindex="1">
                        <option value="0">-- Please select --</option>
                    </select>      
                    <span asp-validation-for="Data.AgencyType"></span>
                </div>

                <div class="agency-filter-state" style="display:none">
                     <div class="control-group validate-input">
		                <label for="ddlLocalStateFilter">*Filter Agency by State</label>
		                <select id="ddlLocalStateFilter"  asp-items="Model.Data.StateList" asp-for="Data.StateFilter" tabindex="5">		
                            <option value="0">--SELECT--</option>
		                </select>
		                 <span asp-validation-for="Data.StateFilter"></span>		 
	                </div>
                </div>

                <div class="control-group validate-input">
		            <label for="ddlAgency">*Agency</label>
		            <select id="ddlAgency"  class="agencySelect" asp-items="Model.Data.AgencyList" asp-for="Data.Agency" tabindex="10">		
		            </select>
		             <span asp-validation-for="Data.Agency"></span>		 
	            </div>

               @if(Model.Data.SubAgencyList is not null && Model.Data.SubAgencyList.Count() > 0)
                {  
		            <div class="control-group validate-input subagencies">
			            <label for="ddlSubAgency">*Sub Agency</label>
			            <select id="ddlSubAgency"  class="agencySelect" asp-items="Model.Data.SubAgencyList" asp-for="Data.SubAgency" tabindex="15">		
			            </select>
			             <span asp-validation-for="Data.SubAgency"></span>		 
		            </div>
	            }
	            else
	            {
		            <div class="control-group validate-input subagencies" style="display:none">
			            <label for="ddlSubAgency">*Sub Agency</label>
			            <select id="ddlSubAgency"  class="agencySelect" asp-for="Data.SubAgency" tabindex="20">		
			            </select>
			             <span asp-validation-for="Data.SubAgency"></span>		 
		            </div>
	            }

               

                <div class="control-group validate-input">
                     <label for="txtFirstName">*First Name</label>
                    <input asp-for="Data.FirstName"  type="text" id="txtFirstName" tabindex="25">
                    <span asp-validation-for="Data.FirstName"></span>	
                </div>

                <div class="control-group validate-input">
                    <label for="txtLastName">*Last Name</label>
                    <input asp-for="Data.LastName" type="text" id="txtLastName" tabindex="30">
                    <span asp-validation-for="Data.LastName"></span>
                </div>

                <div class="control-group validate-input">
                    <label for="drpRole">*Role</label>
                    <select asp-for="Data.Role" asp-items="Model.Data.RoleList" id="drpRole" tabindex="35">
                        <option value="0">Not Selected</option>
                    </select>
                    <span asp-validation-for="Data.Role"></span>
                </div>


                 <div class="control-group validate-input">
                    <label for="txtAddress1">*Address 1</label>
                    <input asp-for="Data.Address1" type="text" maxlength="40" id="txtAddress1" tabindex="40">
                    <span asp-validation-for="Data.Address1"></span>
                </div>

                 <div class="control-group validate-input">
                    <label for="txtAddress2">Address 2</label>
                    <input asp-for="Data.Address2" type="text" id="txtAddress2">
                    <span asp-validation-for="Data.Address2"></span>
                </div>

                 <div class="control-group validate-input">
                    <label for="txtCity">*City</label>
                    <input asp-for="Data.City" type="text" id="txtCity" tabindex="45">
                     <span asp-validation-for="Data.City"></span>
                </div>

                <div class="control-group validate-input">
                    <label for="ddlState">*State</label>
                    <select id="ddlState" asp-for="Data.State" asp-items="Model.Data.StateList" tabindex="50">
                        <option value="0"> - Please Select - </option>
                    </select>
                     <span asp-validation-for="Data.State"></span>
                </div>

                 <div class="control-group validate-input">
                    <label for="txtZIP">*ZIP+4 Code (+4 is optional)</label>
                    <input asp-for="Data.PostalCode" type="text" id="txtZIP" tabindex="55" />
                    <span asp-validation-for="Data.PostalCode"></span>
                </div>

                <div class="control-group validate-input">
                    <label for="txtPhone">*Phone Number (Example: ### - ### - ####)</label>
                    <input asp-for="Data.Phone" type="text" id="txtPhone" tabindex="60" />
                    <span asp-validation-for="Data.Phone"></span>
                </div>

                 <div class="control-group validate-input">
                    <label for="txtExtension">Ext:&nbsp;&nbsp;</label>
                    <input asp-for="Data.Extension" type="text" maxlength="6" id="txtExtension" />
                    <span asp-validation-for="Data.Extension"></span>
                </div>
                <br>

                 <div class="control-group validate-input">
                    <label for="txtFax">Fax Number (Example: ### - ### - ####)</label>
                    <input asp-for="Data.Fax" type="text" id="txtFax" />
                    <span asp-validation-for="Data.Fax"></span>
                </div>
                <br>

                <div class="control-group validate-input">
                    <label for="txtEmail">*Email Address</label>
                    <input asp-for="Data.Email" type="text" id="txtEmail" tabindex="65">
                    <span asp-validation-for="Data.Email"></span>
                </div>

               <div class="control-group validate-input">
                     <label for="txtWebsite">Website</label>
                    <input asp-for="Data.Website" type="text" id="txtWebsite">
                    <span asp-validation-for="Data.Website"></span>
               </div>
                <br>

                <h5>*Permission to list your name and contact information on our website</h5>
                
                    <legend>*Permission to list your name and contact information on our website</legend>

                    <div class="control-group validate-input">
                        <span class="usa-unstyled-list" title="Yes, we may list your name and contact information on our website.">
                        <input id="rdoContactYes" name="DisplayPermission" type="radio" value="ContactYes" checked="checked" tabindex="69">
                        <label for="rdoContactYes">Yes</label></span>&nbsp;&nbsp;&nbsp;

                        <span class="usa-unstyled-list" title="No, we may not list your name and contact information on our website.">
                        <input id="rdoContactNo" name="DisplayPermission" type="radio" value="ContactNo" tabindex="70">
                        <label for="rdoContactNo">No</label></span>
                    </div>
               
                <br>
                <input type="submit" value="Submit">
            </div>
            <div class="usa-width-one-half">
                <div class="privacy-border">
                    <div>
                        <p>
                            <strong>The CyberCorps®: Scholarship for Service (SFS) Agency Official (AO) registration system </strong>
                        </p>
                        <p>
                            <strong>Privacy Act Statement: </strong>
                            Pursuant to 5 U.S.C. § 552a(e)(3), this Privacy Act Statement serves to inform you of why OPM is requesting the information on this application
                        </p>
                        <p>
                            <i>Authority:</i>
                            The National Science Foundation Act of 1950, as amended, authorizes the National Science Foundation (NSF) to promote and advance scientific progress in the United States by competitively awarding grants and cooperative agreements for research and education in the sciences, mathematics, and engineering. The CyberCorps®: Scholarship for Service (SFS) program, as a program within the Division of Undergraduate Education at NSF, was established under this charter.
                            The U.S. Office of Personnel Management's authority to collect information in support of SFS program activities is derived from the above Law through a Memorandum of Understanding (MOU) between NSF and the U.S. Office of Personnel Management (OPM) that tasks OPM with
                            providing the operational framework for the federal placement and tracking of students throughout the academic phase and post-graduation federal employment obligation.
                        </p>
                        <p>
                            <i>Purpose:</i>
                            The information collected is used to identify information from participating agency officials to enable participating students to explore employment opportunities at their organizations and is necessary
                            for the purpose of managing student placement. It may also be used for studies and statistics that will not identify you.
                        </p>
                        <p>
                            <i>Routine Uses:</i>
                            The information requested on this form may be shared externally as a “routine use” and is subject to verification via paper or electronic media records. The information collected is as follows:
                            (1) the name of the organization; (2) the name of the sub-agency or sub-division; (3) the registrant’s full name; (4) the organization’s address; (5) phone and fax numbers; and (6) the registrant’s Email address.
                            This information is made available to participating students, Principal Investigators (PIs), and registered agency officials.  The web site also records the number of times a participating agency official views participating student resumes.
                            A complete list of the routine uses can be found in the system of records notice associated with this application, OPM Internal 18, CyberCorps® Scholarship for Service, FR 79 42604, July 18, 2014.
                        </p>
                        <p>
                            <i>Consequences of failure to provide information:</i>
                            Furnishing the data requested is voluntary, but failure to do so will prevent you from being granted access to information about participating students and their availability for placement with your agency.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <style>
            .grid-extra-wide {
                max-width: 160rem;
            }

            .privacy-border {
                border-top: 3px solid #f1f1f1;
                border-bottom: 3px solid #f1f1f1;
                border-left: 3px solid #f1f1f1;
                border-right: 3px solid #f1f1f1;
                padding: 15px;
            }
        </style>
    </form>
</div>
@section scripts{ 
<script asp-add-nonce>
    $(function () {		
        $("#ddlAgencyType").on("change", function() {
            var typeID = $(this).val();
            var typeName = $("#ddlAgencyType option:selected" ).text();
            if(typeName == "State" || typeName == "Local" || typeName == "Tribal"){
                $(".agency-filter-state").show();
            }
            else {
                 $(".agency-filter-state").hide();
                $("#ddlAgency").empty();
                $("#ddlAgency").append("<option value=''>--SELECT--</option>");
                $.getJSON(`?handler=AgenciesByType&AgencyTypeID=${typeID}`, (data) => {
                    $.each(data, function (i, item) {
                        $("#ddlAgency").append(`<option data-id="${item.apprFlow}" value="${item.id}">${item.name}</option>`);
                    });
                });
            }
        });

        $("#ddlLocalStateFilter").on("change", function() {			 
			 var stateID = $(this).val();	 
             var typeID = $("#ddlAgencyType option:selected").val();
              $("#ddlAgency").empty();
              $("#ddlAgency").append("<option value=''>--SELECT--</option>");
			  $.getJSON({
				  url: `?handler=AgenciesByState&stateID=${stateID}&typeID=${typeID}`
				}).done(function (data, status, xhr) {
					 $.each(data, function (i, item) {
                        $("#ddlAgency").append(`<option data-id="${item.apprFlow}" value="${item.id}">${item.name}</option>`);
                    });
                    $('.subagencies').hide();
					
				}).fail(function (xhr, status, error) {
			});
		 });

		 $("#ddlAgency").on("change", function() {			 
			 var parent = $(this).val();	    
			  $.getJSON({
				  url: `?handler=SubAgencies&ParentAgencyID=${parent}`
				}).done(function (data, status, xhr) {
					 $.each(data, function (i, item) {
						 $("#ddlSubAgency").append(`<option data-id="${item.apprFlow}" value="${item.id}">${item.name}</option>`);
					});
					if($.isEmptyObject(data)){
						$("#ddlSubAgency").empty();
						$('.subagencies').hide();
					}
					else {
						$('.subagencies').show();
					}
				}).fail(function (xhr, status, error) {
			});


		 });

		 var totalSubAgencies = $('#ddlSubAgency > option').length;
		 console.log(totalSubAgencies);
		 if(totalSubAgencies > 0){
			 $('.subagencies').show();
		 }

		  $('#Data_IsInternational').change(function() {
			 if(this.checked) {
				$('#txtCountry').prop( "disabled", false );
			}     
			else {
				$('#txtCountry').prop( "disabled", true );
			}
		  });

    });
</script>

}